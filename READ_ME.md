# HabiTrack (习惯养成迹) - 项目需求与开发指导文档

## 1. 项目愿景与目标

**项目名称:** HabiTrack (中文名: 习惯养成迹)

**核心理念:** 通过一个界面温和、交互治愈、正向激励的工具，帮助用户轻松地养成和追踪良好习惯，在点滴积累中见证自己的成长。

**目标用户:** 希望通过量化和追踪来培养新习惯、戒除坏习惯的年轻人群体。

## 2. 核心功能 (MVP - 最小可行产品)

### 2.1. 习惯模块
- **创建习惯:**
    - 用户可自定义习惯名称。
    - 可选择习惯图标（提供一个温馨的图标库）。
    - 设定习惯频率（如：每日、每周X次、每月X次）。
    - 添加一句激励自己的话。
- **习惯列表:**
    - 以卡片形式清晰展示所有进行中的习惯。
    - 显示今日是否已完成。
    - 显示当前连续打卡天数（Streak）。
- **打卡操作:**
    - 提供一个醒目且易于操作的打卡按钮。
    - 点击打卡后，播放一个流畅、治愈的动画（例如：小树苗长出一片新叶、星星闪烁后被点亮）。

### 2.2. 数据与统计模块
- **日历视图:**
    - 以热力图或打点的方式，在日历上展示过去一个月的打卡记录，让成就一目了然。
- **统计报表:**
    - 展示总打卡次数、最长连续打卡天数等核心数据。
    - 使用平滑的图表（如曲线图）来可视化习惯养成趋势。

### 2.3. 用户与激励模块
- **用户系统:**
    - 基于 `uni-id` 实现用户注册与登录，确保数据云端同步，永不丢失。
- **激励系统:**
    - **连续打卡:** 连续打卡达到特定天数（如7天、21天、30天）时，给予弹窗祝贺和动画奖励。
    - **成就徽章:** 完成特定目标（如"累计打卡100次"、"养成第一个21天习惯"）可点亮成就徽章。

## 3. 设计与交互（UI/UX）

- **设计风格:** 极简、治愈、温和。
- **色彩方案:**
    - **主色调:** 采用低饱和度的莫兰迪色系，如薄荷绿 (`#A8D8B9`)、软粉 (`#F3E6E6`)、天空蓝 (`#A2C2E8`)。
    - **文字颜色:** 深灰色 (`#5C5C5C`)，避免纯黑带来的尖锐感。
    - **背景色:** 柔和的米白或浅灰色。
- **动效设计:**
    - **目标:** 流畅、有意义、不卡顿。动效是产品的灵魂。
    - **关键动效:**
        - **打卡动画:** 使用 `Lottie` 动画，确保高质量和高性能。
        - **页面切换:** 平滑的淡入淡出效果。
        - **数据加载:** 温和的骨架屏（Skeleton）或自定义加载动画。
- **字体:** 选择一款圆润、可爱的开源中文字体。

## 4. 技术栈

- **前端:** `uni-app` (使用 Vue 3 + Vite)
- **后端:** `uniCloud` 云开发平台
- **核心插件:**
    - `uni-id-co`: 用户中心
    - `uni-clientdb-jql`: 前端JQL查询库
- **UI库:** 优先考虑手写高质量、符合设计风格的组件。若使用UI库，则选用 `uView UI` 并进行深度定制。

---

## 5. Cursor AI 开发指导规则 (Cursor Rules)

> 以下规则将指导 AI 在整个开发过程中的行为，以确保代码质量和项目一致性。

1.  **【语言与框架】**
    *   **前端:** 必须使用 `Vue 3` 的 `script setup` 语法糖进行开发，代码更简洁。
    *   **后端:** 所有云函数和数据库 schema 必须遵循 `uniCloud` 的官方规范。
    *   **注释:** 必须为所有核心函数（云函数、前端工具函数）添加JSDoc格式的中文注释，解释其功能、参数和返回值。

2.  **【代码结构】**
    *   **组件化:** UI界面必须拆分为高度可复用的Vue组件。例如，`HabitCard.vue`, `CalendarView.vue`。
    *   **目录规范:**
        *   组件存放于 `/components` 目录。
        *   云函数按功能模块在 `/uniCloud/cloudfunctions` 中创建子目录。
        *   数据库 Schema 文件存放于 `/uniCloud/database`。
        *   静态资源（图片、Lottie JSON）存放于 `/static`。

3.  **【UI与动效实现】**
    *   **样式:** 使用 `SCSS` 作为CSS预处理器，并大量使用变量来管理颜色、字体大小、圆角等，便于全局修改。所有组件都应有 `scoped` 样式。
    *   **圆角:** 应用全局圆角风格，关键组件的 `border-radius` 统一为 `15px`。
    *   **动画:** 复杂动画（如打卡）必须使用 `Lottie` 实现。简单的过渡效果使用 `CSS Transition` 或 `uni-app` 的 `uni.createAnimation` API。

4.  **【后端与数据】**
    *   **数据库:** 所有数据库操作优先使用 `clientDB`，只有在复杂权限或事务场景下才编写云函数。
    *   **数据安全:** 任何涉及数据修改的云函数或 `clientDB` 操作，都必须配置严格的 `permission` 规则，确保用户只能修改自己的数据。
    *   **API设计:** 云函数命名应清晰，如 `habit-manage`，并通过 `action` 参数区分不同操作（`add`, `update`, `delete`）。

5.  **【开发流程】**
    *   **小步快跑:** 每次只专注于一个核心功能的开发，完成后立即向您展示。
    *   **主动沟通:** 在遇到不明确的需求或技术选择时，会主动向您提问。
    *   **遵守规则:** 严格遵守以上所有规则进行编码。 